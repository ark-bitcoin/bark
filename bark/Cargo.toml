[package]
name = "bark-wallet"
version = "0.1.0-beta.1"
license = "CC0-1.0"
authors = [ "Team Second <hello@second.tech>" ]
repository = "https://gitlab.com/ark-bitcoin/bark"
description = "Wallet library and CLI for the bitcoin Ark protocol built by Second"
edition = "2024"
readme = "README.md"

[features]
default = ["tls-native-roots", "rand"]
onchain_bdk = ["bdk_wallet", "bark-bitcoin-ext/bdk", "hal"]
tls-native-roots = ["tonic/tls-native-roots"]
tls-webpki-roots = ["tonic/tls-webpki-roots"]
rand = ["dep:rand", "bitcoin/rand", "bip39/rand"]

[lib]
name = "bark"
path = "src/lib.rs"

[dependencies]

# OWN
ark-lib = { version = "0.1.0-beta.1", path = "../lib" }
bark-bitcoin-ext = { version = "0.1.0-beta.1", path = "../bitcoin-ext", default-features = false, features = [
	"bdk", "esplora", "rpc",
]}
bark-server-rpc = { version = "0.1.0-beta.1", path = "../server-rpc" }

# EXPORTED
bitcoin.workspace = true
lightning-invoice.workspace = true
lnurl-rs.workspace = true
anyhow.workspace = true
thiserror.workspace = true
log.workspace = true
serde.workspace = true

# INTERNAL
rusqlite =  "0.31.0"

lazy_static.workspace = true
chrono.workspace = true
serde_json.workspace = true

bip39.workspace = true
bdk_core = { workspace = true }
bdk_bitcoind_rpc = { workspace = true }
bdk_esplora = { workspace = true }
lightning.workspace = true

tonic.workspace = true
tokio.workspace = true
tokio-stream.workspace = true
futures.workspace = true

# Prebuilt BDK Wallet only
bdk_wallet = { workspace = true, features = [ "rusqlite" ], optional = true }

hal = { version = "=0.10.0", default-features = false, optional = true}
# For some doctests
rand = { workspace = true, optional = true }

[dev-dependencies]
ark-lib = { path = "../lib", features = [ "test-util" ] }
rand = { workspace = true, optional = false }
